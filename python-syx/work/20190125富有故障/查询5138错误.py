from sqlMoudle.sqlTemplate import *


def getFailedData(orderIds):
    splitlines = orderIds.splitlines()
    for orderId in splitlines:
        getSql = "SELECT order_id,user_id,amount,response  FROM trustee.t_trustee_request_order_0%02s WHERE  order_id=%s;" % (
        orderId[-2:], orderId)
        res = getOne(getSql)
        if str(res).find('<resp_code>0000</resp_code>') < 0:
            print(str(res['user_id'])+' order_id ' + str(res['order_id']) + ' 金额 ' + str(res['amount']))
            # a = 0
            # for s in res:
            #     if '可用余额不足' in s['response']:
            #         a = a + 1
            #
            # print(a)


# state:0初始化 1成功 2失败
orderIds = '''286102898207670057
286103224307718001
286103407207672006
286103501307723011
286103514207677067
286103518307725067
286103535207679007
286103550307727003
286103575207681057
286103593307731039
286103598207684057
286103600207685077
286103636307734057
286103637307737005
286104185207394032
286104227307522015
286104433207397048
286104523207401053
286104606307533022
286104796207407098
286104933207411042
286105157207839055
286105199307003008
286105208307005084
286105343307010025
286105345307012017
286105417207846018
286105752207852094
286105974207868018
286105992207871092
286106021307034076
286106055207874090
286106074307040073
286106082207878090
286106093307044016
286106162307047016
286106180307048070
286106187307049006
286106321307052030
286106427307189080
286106437207114027
286106463207269031
286106502307777073
286106767307107026
286106784307109031
286107246207931096
286107378207933057
286107410207939089
286107477207945064
286107504307128075
286107638207948082
286107934307137020
286108218307142078
286108228207961059
286108272307144001
286108369307152046
286108747207000071
286108945207014064
286109040207017071
286109300207034099
286109658307205057
286109676307206057
286109692207054057
286109705307208014
286109753307275057
286109762207174061
286109794307337057
286109946207313011
286109977207314013
286109977207316000
286110120307050038
286110125207863019
286110298207877011
286110627207888072
286110688207889077
286110694307075009
286110792307076044
286110919207897099
286111038307086060
286111134307088095
286111208207908065
286111269207910062
286111276307096005
286111282307106068
286111288307121068
286111295207955068
286111301207963058
286111301207965062
286111308307148062
286111314207985062
286111320207999062
286111327207007062
286111333307191062
286111340207030062
286111346307221062
286111352207057062
286111359207061062
286111365207074062
286111372207079062
286111378207096068
286111384207111068
286111391307309068
286111397207152068
286111405207182068
286111412207207062
286111418207226069
286111418307386068
286111425307415062
286111431207263062
286111438307475062
286111444207325062
286111451307542062
286111457307570062
286111463307610068
286111470207435062
286111476207467062
286111483207500062
286111490307759062
286111496207571062
286111502207603062
286111509307876062
286111515307912062
286111522207728062
286111528207768062
286111533207801024
286111535307020062
286111542307067062
286111550207921062
286111556307149062
286111563207028062
286111569307237062
286111575207121062
286111582307329062
286111588307361062
286111595307409062
286111601207297081
286111604307475018
286111610307525068
286111617307568068
286111623207479062
286111630307683062
286111636207574062
286111643307786062
286111649307836062
286111656207725062
286111662207778062
286111666307964087
286111668307990062
286111674207879032
286111675207885062
286111681207924062
286111688207971062
286111694207004062
286111701207054062
286111707307268062
286111713207146062
286111720207196062
286111727307403062
286111733307444062
286111739207317062
286111746307524062
286111753307567062
286111759207448062
286111766207489062
286111772207546062
286111774207567066
286111779207602062
286111785307823062
286111791307869062
286111798307919062
'''
getFailedData(orderIds)
